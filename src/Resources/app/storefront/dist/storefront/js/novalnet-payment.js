"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["novalnet-payment"],{196:(e,t,n)=>{var a=n(6285),o=n(8254),l=n(1110);class d extends a.Z{init(){this.client=new o.Z;const e=document.querySelectorAll(".novalnet-payment-name"),t=["novalnetsepa","novalnetsepaguarantee","novalnetsepainstalment"],n=["novalnetinvoiceguarantee","novalnetinvoiceinstalment"];e.forEach((e=>{const a=document.querySelector("input[name=paymentMethodId]:checked"),o=document.querySelector("#"+e.value+"Id"),l=document.querySelector('input[type="radio"].'+e.value+"-SavedPaymentMethods-tokenInput:checked"),d=document.querySelectorAll('input[type="radio"].'+e.value+"-SavedPaymentMethods-tokenInput"),r=document.querySelectorAll('input[name="paymentMethodId"]'),u=document.querySelector('#confirmOrderForm button[type="submit"]'),c=document.querySelector('#novalnetchangePaymentForm button[type="submit"]');if(null!=a&&null!=o&&a.value===o.value&&(null!=document.getElementById(e.value+"-payment")&&null!=document.getElementById(e.value+"-payment")&&(document.getElementById(e.value+"-payment").style.display="block"),null!=document.getElementById(e.value+"ZeroAmountNotify")&&null!=document.getElementById(e.value+"ZeroAmountNotify")&&(document.getElementById(e.value+"ZeroAmountNotify").style.display="block")),null!=l&&this.showComponents(l,e.value),"novalnetcreditcard"==e.value)this._createScript((()=>{const t=JSON.parse(document.getElementById(e.value+"-payment").getAttribute("data-"+e.value+"-payment-config"));this.loadIframe(t,e.value)}));else if(t.includes(e.value)||n.includes(e.value)){this._createScript((()=>{const t=JSON.parse(document.getElementById(e.value+"-payment").getAttribute("data-"+e.value+"-payment-config"));if("novalnetsepa"!=e.value&&null===t.company||!NovalnetUtility.isValidCompanyName(t.company)){document.getElementById(e.value+"DobField").style.display="block"}}));const t=document.getElementById(e.value+"AccountData"),n=document.getElementById(e.value+"AccountBic"),a=document.getElementById(e.value+"Mandate");null!=t&&(t.onpaste=e=>e.preventDefault(),["click","keydown","keyup"].forEach((e=>{t.addEventListener(e,(e=>{var t=e.target.value;null!=t&&null!=t&&((t=t.toUpperCase()).match(/(?:CH|MC|SM|GB|GI)/)?document.querySelector(".nn-bic-field").classList.remove("nnhide"):document.querySelector(".nn-bic-field").classList.add("nnhide"))}))}))),null!=a&&a.addEventListener("click",(()=>{null!=document.getElementById(e.value+"AboutMandate")&&1==document.getElementById(e.value+"AboutMandate").classList.contains("nnhide")?document.getElementById(e.value+"AboutMandate").classList.remove("nnhide"):document.getElementById(e.value+"AboutMandate").classList.add("nnhide")})),null!=n&&(n.onpaste=e=>e.preventDefault())}else if("novalnetmbway"==e.value){if("function"==typeof window.intlTelInput){const e=document.getElementById("novalnetmbwayMobileNo"),t=document.getElementById("novalnetmbwayMobileDialcode"),n=window.intlTelInput(e,{preferredCountries:["pt"],separateDialCode:!0,autoPlaceholder:"off",placeholderNumberType:"MOBILE",showFlags:!0,autoInsertDialCode:!0,formatOnDisplay:!1});t.value=n.getSelectedCountryData().dialCode;let a="";e.addEventListener("countrychange",(e=>{a=n.getSelectedCountryData().dialCode,null!=a&&(t.value=a)}))}}else if("novalnetdirectdebitach"==e.value){const e=document.getElementById("novalnetdirectdebitachAccountHolder");this.handleInputKeyPress(e)}const i=document.querySelectorAll(".remove_cc_card_details"),s=document.querySelectorAll(".remove_card_details"),m=document.querySelectorAll(".remove_ach_card_details"),v=document.querySelectorAll(".remove_guarantee_card_details "),y=document.querySelectorAll(".remove_instalment_card_details");"novalnetcreditcard"===e.value?i.forEach((t=>{t.addEventListener("click",(()=>{this.removeStoredCard(t,e.value)}))})):"novalnetsepa"===e.value?s.forEach((t=>{t.addEventListener("click",(()=>{this.removeStoredCard(t,e.value)}))})):"novalnetsepaguarantee"===e.value?v.forEach((t=>{t.addEventListener("click",(()=>{this.removeStoredCard(t,e.value)}))})):"novalnetsepainstalment"===e.value?y.forEach((t=>{t.addEventListener("click",(()=>{this.removeStoredCard(t,e.value)}))})):"novalnetdirectdebitach"===e.value&&m.forEach((t=>{t.addEventListener("click",(()=>{this.removeStoredCard(t,e.value)}))})),"novalnetinvoiceinstalment"!==e.value&&"novalnetsepainstalment"!==e.value||(null!=document.getElementById(e.value+"Duration")&&(document.getElementById(e.value+"Duration").selectedIndex=0,document.getElementById(e.value+"Duration").addEventListener("change",(t=>{const n=t.target.value;document.querySelectorAll("."+e.value+"Detail").forEach((function(e){e.dataset.duration===n?e.hidden=!1:e.hidden="hidden"}))}))),null!=document.getElementById(e.value+"Info")&&document.getElementById(e.value+"Info").addEventListener("click",(t=>{this.hideSummary(e.value)}))),null!=d&&d.forEach(((t,n)=>{t.addEventListener("click",(()=>{this.showComponents(t,e.value)}))})),null!=c&&(null===a&&(c.disabled=!0),null!=r&&r.forEach((t=>{t.addEventListener("click",(()=>{this.showPaymentForm(t,e.value),c.disabled=!1}))})),c.addEventListener("click",(t=>{"novalnetcreditcard"!=e.value&&"novalnetsepa"!=e.value&&"novalnetdirectdebitach"!=e.value||this.validatePaymentForm(e.value,c,"changePayment",t)}))),null!=u&&u.addEventListener("click",(a=>{("novalnetcreditcard"==e.value||t.includes(e.value)||n.includes(e.value)||"novalnetmbway"==e.value||"novalnetdirectdebitach"==e.value)&&this.validatePaymentForm(e.value,u,"checkout",a)}))}))}_createScript(e){const t=document.createElement("script");t.type="text/javascript",t.src="https://cdn.novalnet.de/js/v2/NovalnetUtility.js",t.addEventListener("load",e.bind(this),!1),document.head.appendChild(t)}loadIframe(e,t){if("novalnetcreditcard"===t){var n=this;if(NovalnetUtility.setClientKey(e.clientKey),null!=document.querySelector("#novalnetchangePaymentForm"))var a=document.querySelector("#novalnetchangePaymentForm");else a=document.querySelector("#confirmOrderForm");var l={callback:{on_success:function(e){if(document.getElementById("novalnetcreditcard-panhash").value=e.hash,document.getElementById("novalnetcreditcard-uniqueid").value=e.unique_id,document.getElementById("novalnetcreditcard-doRedirect").value=e.do_redirect,null!=e.card_exp_month&&null!=e.card_exp_year&&(document.getElementById("novalnetcreditcard-expiry-date").value=e.card_exp_month+"/"+e.card_exp_year),document.getElementById("novalnetcreditcard-masked-card-no").value=e.card_number,document.getElementById("novalnetcreditcard-card-type").value=e.card_type,null==document.querySelector('#novalnetchangePaymentForm button[type="submit"]'))return a.submit(),!0;{const t=new o.Z;n._disableSubmitButton(document.querySelector('#novalnetchangePaymentForm button[type="submit"]')),t.post(document.getElementById("storeCustomerDataUrl").value,JSON.stringify({pan_hash:e.hash,unique_id:e.unique_id,doRedirect:e.do_redirect,paymentName:"creditcard",parentOrderNumber:document.getElementById("parentOrderNumber").value,aboId:document.getElementById("aboId").value,paymentMethodId:document.getElementById("novalnetcreditcardId").value}),(e=>{const t=JSON.parse(e);if(1!=t.success||null==t.redirect_url)return 1==t.success?(a.submit(),!0):(n.preventForm("novalnetcreditcard",t.message),n._removeButtonLoader(document.querySelector('#novalnetchangePaymentForm button[type="submit"]')),!1);window.location.replace(t.redirect_url)}))}},on_error:function(e){if(void 0!==e.error_message&&""!==e.error_message){if(null!=document.getElementById("confirmFormSubmit"))var t=document.getElementById("confirmFormSubmit");else if(null!=document.querySelector('#novalnetchangePaymentForm button[type="submit"]'))t=document.querySelector('#novalnetchangePaymentForm button[type="submit"]');else t=document.querySelector('#confirmOrderForm button[type="submit"]');n.preventForm("novalnetcreditcard",e.error_message),n._removeButtonLoader(t)}return!1},on_show_overlay:function(e){document.getElementById("novalnetCreditcardIframe").classList.add("novalnet-challenge-window-overlay")},on_hide_overlay:function(e){document.getElementById("novalnetCreditcardIframe").classList.remove("novalnet-challenge-window-overlay")},on_show_captcha:function(){return elementContent.innerHTML="Your Credit Card details are Invalid",element.style.display="block",element.scrollIntoView(),elementContent.focus(),!1}},iframe:e.iframe,customer:e.customer,transaction:e.transaction,custom:e.custom};NovalnetUtility.createCreditCardForm(l)}}handleInputKeyPress(e){e.addEventListener("keypress",(e=>{const t=e.keyCode||e.which,n=String.fromCharCode(t);if(!/[^0-9\[\]\/\\#,+@!^()$~%'"=:;<>{}\_\|*?`]/g.test(n))return e.preventDefault(),!1}))}showPaymentForm(e,t){const n=document.querySelector("#"+t+"Id");void 0!==n&&""!==n.value&&e.value===n.value?("novalnetcreditcard"==t&&NovalnetUtility.setCreditCardFormHeight(),void 0!==document.getElementById(t+"-payment")&&null!==document.getElementById(t+"-payment")&&(document.getElementById(t+"-payment").style.display="block")):void 0!==document.getElementById(t+"-payment")&&null!==document.getElementById(t+"-payment")&&(document.getElementById(t+"-payment").style.display="none")}showComponents(e,t){"new"===e.value&&!0===e.checked?document.getElementById(t+"-payment-form").classList.remove("nnhide"):document.getElementById(t+"-payment-form").classList.add("nnhide")}hideSummary(e){const t=document.getElementById(e+"Summary");t.classList.contains("nnhide")?t.classList.remove("nnhide"):t.classList.add("nnhide")}removeStoredCard(e,t){var n=document.querySelector('input[name="'+t+'FormData[paymentToken]"]:checked');null!=n&&""!=n&&(this.client.post(document.getElementById("cardRemoveUrl").value,JSON.stringify({token:n.value}),""),setTimeout((()=>window.location.reload()),2e3))}_disableSubmitButton(e){e.setAttribute("disabled","disabled");new l.Z(e).create()}_removeButtonLoader(e){e.removeAttribute("disabled");return new l.Z(e).remove(),!1}validateAge(e){var t=new Date;if(void 0===e||""===e)return NaN;var n=e.split("."),a=t.getFullYear()-n[2],o=t.getMonth()-n[1];return o+=1,void 0!==n[2]&&4!==n[2].length?NaN:((o<0||"0"==o&&t.getDate()<n[0])&&a--,a)}preventForm(e,t,n="",a=""){n&&(n.preventDefault(),n.stopImmediatePropagation());var o=document.getElementById(e+"-error-container"),l=o.querySelector(".alert-content");return l.innerHTML="",void 0!==t&&""!==t?(l.innerHTML=t,o.classList.remove("nnhide")):o.classList.add("nnhide"),a&&(a.style.borderColor="red"),o.scrollIntoView(),!1}sendChangePaymentRequest(e,t,n,a){a.preventDefault(),a.stopImmediatePropagation(),t.parentOrderNumber=document.getElementById("parentOrderNumber").value,t.aboId=document.getElementById("aboId").value,this.client.post(document.getElementById("storeCustomerDataUrl").value,JSON.stringify(t),(t=>{const o=JSON.parse(t);1==o.success?document.querySelector("#novalnetchangePaymentForm").submit():(this.preventForm(e,o.message,a),this._removeButtonLoader(n))}))}validatePaymentForm(e,t,n,a){const o=document.querySelector("#"+e+"Id"),l=document.querySelector("input[name=paymentMethodId]:checked"),d=document.querySelector('input[type="radio"].'+e+"-SavedPaymentMethods-tokenInput:checked");if("novalnetcreditcard"==e||["novalnetsepa","novalnetsepaguarantee","novalnetsepainstalment"].includes(e)||"novalnetdirectdebitach"==e||"novalnetmbway"==e){if(void 0!==o&&""!==o.value&&l.value===o.value)if("novalnetcreditcard"==e)if(null==d||"new"==d.value){var r=document.querySelector("#tos");if(null!=r&&!r.checked)return!1;this._disableSubmitButton(t),a.preventDefault(),a.stopImmediatePropagation(),o.scrollIntoView(),NovalnetUtility.getPanHash()}else"changePayment"==n&&null!=d&&"new"!=d.value&&this.sendChangePaymentRequest(e,{token:d.value,paymentName:"creditcard",paymentMethodId:document.getElementById("novalnetcreditcardId").value},t,a);else if(["novalnetsepa","novalnetsepaguarantee","novalnetsepainstalment"].includes(e)){const o=document.getElementById(e+"AccountData"),l=document.getElementById(e+"AccountBic"),r=document.getElementById(e+"Dob"),c=JSON.parse(document.getElementById(e+"-payment").getAttribute("data-"+e+"-payment-config"));if(null!=d&&"new"!=d.value||void 0!==o&&(void 0===o||""!==o.value))if(null!=d&&"new"!=d.value||void 0!==l&&(void 0===l||""!==l.value)||0!=document.querySelector(".nn-bic-field").classList.contains("nnhide")){if("novalnetsepainstalment"!==e&&"novalnetsepaguarantee"!==e||null!==c.company&&NovalnetUtility.isValidCompanyName(c.company)&&0!==c.allowB2B){if("changePayment"==n&&"novalnetsepa"==e){if(null==d||"new"==d.value){var u={iban:o.value,paymentName:"direct_debit_sepa",paymentMethodId:document.getElementById("novalnetsepaId").value};null!=l&&""!=l.value&&u.push({bic:l.value})}else u={token:d.value,paymentName:"direct_debit_sepa",paymentMethodId:document.getElementById("novalnetsepaId").value};this.sendChangePaymentRequest(e,u,t,a)}}else if(void 0===r||""===r.value){if(void 0!==document.getElementById("novalnetsepaId")&&null!=c.forceGuarantee&&1==c.forceGuarantee&&"novalnetsepaguarantee"===e)return document.getElementById("doForceSepaPayment").value=1,document.getElementById("SepaForcePayment").value=1,!0;this.preventForm(e,c.text.dobEmpty,a,r)}else if(void 0!==r&&""!==r.value){const t=this.validateAge(r.value);if((t<18||isNaN(t))&&void 0!==document.getElementById("novalnetsepaId")&&null!=c.forceGuarantee&&1==c.forceGuarantee&&"novalnetsepaguarantee"===e)return document.getElementById("doForceSepaPayment").value=1,document.getElementById("SepaForcePayment").value=1,!0;(t<18||isNaN(t))&&this.preventForm(e,c.text.dobInvalid,a,r)}}else this.preventForm(e,c.text.invalidIban,a,l);else this.preventForm(e,c.text.invalidIban,a,o)}else if("novalnetdirectdebitach"==e){const o=document.querySelector("input[id ="+e+"AccountHolder"),l=document.getElementById(e+"AccountNo"),r=document.getElementById(e+"RoutingAbaNo"),c=JSON.parse(document.getElementById(e+"-payment").getAttribute("data-"+e+"-payment-config"));if(null==d||"new"==d.value)if(void 0===o||""===o.value)this.preventForm(e,c.text.accountHolderEmpty,a,o);else{if(void 0===l||""===l.value)return this.preventForm(e,c.text.accountNumberEmpty,a,l),!1;if(void 0===r||""===r.value)return this.preventForm(e,c.text.routingNumberEmpty,a,r),!1}if("changePayment"==n&&"novalnetdirectdebitach"==e){if(null==d||"new"==d.value)u={paymentName:"direct_debit_ach",paymentMethodId:document.getElementById("novalnetdirectdebitachId").value,account_holder:o.value,account_number:l.value,routing_number:r.value};else u={paymentName:"direct_debit_ach",paymentMethodId:document.getElementById("novalnetdirectdebitachId").value,token:d.value};this.sendChangePaymentRequest(e,u,t,a)}}else if("novalnetmbway"==e){const t=document.getElementById(e+"MobileNo"),n=JSON.parse(document.getElementById(e+"-payment").getAttribute("data-"+e+"-payment-config"));void 0!==t&&""!==t.value||this.preventForm(e,n.text.mobileEmpty,a,t)}}else if(["novalnetinvoiceguarantee","novalnetinvoiceinstalment"].includes(e)&&void 0!==o&&""!==o.value&&l.value===o.value){const t=document.getElementById(e+"Dob"),n=JSON.parse(document.getElementById(e+"-payment").getAttribute("data-"+e+"-payment-config"));if(null===n.company||!NovalnetUtility.isValidCompanyName(n.company)||0===n.allowB2B)if(void 0===t||""===t.value){if(void 0!==document.getElementById("novalnetinvoiceId")&&null!=n.forceGuarantee&&1==n.forceGuarantee&&"novalnetinvoiceguarantee"===e)return document.getElementById("doForceInvoicePayment").value=1,document.getElementById("InvoiceForcePayment").value=1,!0;this.preventForm(e,n.text.dobEmpty,a,t)}else if(void 0!==t&&""!==t.value){const o=this.validateAge(t.value);if((o<18||isNaN(o))&&void 0!==document.getElementById("novalnetinvoiceId")&&null!=n.forceGuarantee&&1==n.forceGuarantee&&"novalnetinvoiceguarantee"===e)return document.getElementById("doForceInvoicePayment").value=1,document.getElementById("InvoiceForcePayment").value=1,!0;(o<18||isNaN(o))&&this.preventForm(e,n.text.dobInvalid,a,t)}}}}var r=n(3206);class u extends a.Z{init(){new o.Z;this._createScript((()=>{try{r.Z.querySelectorAll(document,"[data-wallet-payments]");this._loadWalletPaymentForm()}catch(e){console.log(e.message)}}));const e=document.querySelector("input[name=paymentMethodId]:checked"),t=document.querySelectorAll('input[name="paymentMethodId"]'),n=document.querySelector("#novalnetgooglepayId"),a=document.querySelector("#novalnetapplepayId");null!=e&&null!=n&&n.value===e.value&&this.showButton("novalnetgooglepay",!0),null!=e&&null!=a&&a.value===e.value&&this.showButton("novalnetapplepay",!0),null!=t&&t.forEach((e=>{e.addEventListener("click",(()=>{const e=document.querySelector("input[name=paymentMethodId]:checked");null!=e&&null!=n&&n.value===e.value?(this.showButton("novalnetapplepay",!1),this.showButton("novalnetgooglepay",!0)):null!=e&&null!=a&&a.value===e.value?(this.showButton("novalnetgooglepay",!1),this.showButton("novalnetapplepay",!0)):(this.showButton("novalnetgooglepay",!1),this.showButton("novalnetapplepay",!1))}))}))}showButton(e,t){if(t)var n="block",a="none";else n="none",a="inline";null!=document.getElementById(e+"-payment")&&null!=document.getElementById(e+"-payment")&&(document.getElementById(e+"-payment").style.display=n),null!=document.querySelector('#novalnetchangePaymentForm button[class="btn btn-primary"]')&&null!=document.querySelector('#novalnetchangePaymentForm button[class="btn btn-primary"]')?document.querySelector('#novalnetchangePaymentForm button[class="btn btn-primary"]').style.display=a:null!=document.getElementById(e+"ZeroAmountNotify")&&null!=document.getElementById(e+"ZeroAmountNotify")&&(document.getElementById(e+"ZeroAmountNotify").style.display=n)}_createScript(e){const t=document.createElement("script");t.type="text/javascript",t.src="https://cdn.novalnet.de/js/v3/payment.js",t.addEventListener("load",e.bind(this),!1),document.head.appendChild(t)}_loadWalletPaymentForm(){var e=NovalnetPayment().createPaymentObject(),t=this.el,n=r.Z.getDataAttribute(this.el,"data-payment-config",!1),a=new o.Z;if(null!=t&&("nn-apple-pay-button"==t.className||t.className.indexOf("nn-apple-pay-button")>=0))var l="novalnetapplepay";else l="novalnetgooglepay";var d={clientKey:n.clientKey,paymentIntent:{merchant:n.merchant,transaction:n.transaction,order:n.order,custom:n.custom,button:n.button,callbacks:{onProcessCompletion:function(e,n){if(e.result&&e.result.status)if("SUCCESS"==e.result.status){if("checkoutPage"==r.Z.getDataAttribute(t,"data-page-type")){var o=r.Z.querySelector(document,"#confirmOrderForm");if(null!=t&&"nn-apple-pay-button"==t.className)n({status:"SUCCESS",statusText:""}),document.getElementById("novalnetapplepay-wallet-token").value=e.transaction.token,o.submit();else if(document.getElementById("novalnetgooglepay-wallet-token").value=e.transaction.token,document.getElementById("novalnetgooglepay-do-redirect").value=e.transaction.doRedirect,e.transaction.doRedirect&&0!=e.transaction.doRedirect){const o=r.Z.getAttribute(t,"data-success-url"),d=r.Z.getAttribute(t,"data-paymentMethodId"),u=r.Z.getAttribute(t,"data-orderId"),c={serverResponse:e,paymentMethodId:d,paymentName:l,orderId:u};a.post(o,JSON.stringify(c),(e=>{const t=JSON.parse(e);1==t.success?(n({status:"SUCCESS",statusText:""}),window.location.replace(t.url)):window.location.reload()}))}else n({status:"SUCCESS",statusText:""}),o.submit();return!0}if("changePayment"==r.Z.getDataAttribute(t,"data-page-type")){o=document.querySelector("#novalnetchangePaymentForm");if(null!=t&&"nn-apple-pay-button"==t.className)var d={wallet_token:e.transaction.token,paymentName:"applepay",parentOrderNumber:document.getElementById("parentOrderNumber").value,aboId:document.getElementById("aboId").value,paymentMethodId:document.getElementById("novalnetapplepayId").value};else d={wallet_token:e.transaction.token,doRedirect:e.transaction.doRedirect,paymentName:"googlepay",parentOrderNumber:document.getElementById("parentOrderNumber").value,aboId:document.getElementById("aboId").value,paymentMethodId:document.getElementById("novalnetgooglepayId").value};a.post(document.getElementById("storeCustomerDataUrl").value,JSON.stringify(d),(e=>{const t=JSON.parse(e);1==t.success&&null!=t.redirect_url?window.location.replace(t.redirect_url):1==t.success?o.submit():n({status:"FAILURE",statusText:t.message})}))}else{const o=r.Z.getAttribute(t,"data-success-url"),d={serverResponse:e,paymentMethodId:r.Z.getAttribute(t,"data-paymentMethodId"),paymentName:l};a.post(o,JSON.stringify(d),(e=>{const t=JSON.parse(e);1==t.success?(n({status:"SUCCESS",statusText:""}),window.location.replace(t.url)):0==t.success?n({status:"FAILURE",statusText:t.message}):window.location.reload()}))}}else n({status:"FAILURE",statusText:e.result.status_text}),e.result.status_text&&alert(e.result.status_text)},onShippingContactChange:function(e,n){const o=r.Z.getDataAttribute(t,"data-shipping-url"),l={shippingInfo:e,paymentMethodId:r.Z.getAttribute(t,"data-paymentMethodId")};return new Promise(((e,t)=>{a.post(o,JSON.stringify(l),((n,a)=>{a.status>=400&&t(n);try{n=JSON.parse(n),e(n)}catch(e){t(e)}}))})).then((function(e){e.shipping.length?n({amount:e.totalPrice,lineItems:e.lineItem,methods:e.shipping,defaultIdentifier:e.shipping[0].identifier}):n({methodsNotFound:"No Shipping Contact Available, please enter a valid contact"})}))},onShippingMethodChange:function(e,n){const o=r.Z.getAttribute(t,"data-shippingUpdate-url"),l={shippingMethod:e};return new Promise(((e,t)=>{a.post(o,JSON.stringify(l),((a,o)=>{o.status>=400&&(t(a),n({status:"FAILURE"}));try{a=JSON.parse(a),e(a)}catch(e){t(e),n({status:"FAILURE"})}}))})).then((function(e){n({amount:e.totalPrice,lineItems:e.lineItem})}))},onCouponCodeChange:function(e,n){const o=r.Z.getAttribute(t,"data-couponCodeUpdate-url"),l={couponCode:e};return new Promise(((e,t)=>{a.post(o,JSON.stringify(l),((a,o)=>{try{a=JSON.parse(a),e(a)}catch(e){t(e),n({status:"FAILURE"})}}))})).then((function(e){"success"==e.status?n({amount:e.totalPrice,lineItems:e.lineItem}):n({error:"INVALID",errorText:"The coupon code entered seems to be invalid or expired"})}))},onPaymentButtonClicked:function(e){var n=document.querySelector("#tos");if(null!=n&&!n.checked&&"checkoutPage"==r.Z.getDataAttribute(t,"data-page-type")){var o=r.Z.querySelector(document,"#confirmOrderForm");return e({status:"FAILURE"}),o.submit(),!1}if("productDetailPage"==r.Z.getDataAttribute(t,"data-page-type")||"productListingPage"==r.Z.getDataAttribute(t,"data-page-type")){e({status:"SUCCESS"});var l=1;const n=r.Z.querySelector(t,"#productId").value,o=document.querySelector(".product-detail-quantity-select"),d=r.Z.getDataAttribute(t,"data-addToCartUrl",!1);null!=o&&(l=o.value),a.post(d,JSON.stringify({productId:n,quantity:l,type:"product"}),(e=>{const t=JSON.parse(e);0==t.success&&window.location.replace(t.url)}))}else e({status:"SUCCESS"})}}}};e.setPaymentIntent(d),e.isPaymentMethodAvailable((function(n){void 0!==t&&(n?("nn-apple-pay-button"==t.className&&void 0!==document.querySelectorAll(".nn-apple-pay-error-message")&&null!==document.querySelectorAll(".nn-apple-pay-error-message")&&document.querySelectorAll(".nn-apple-pay-error-message").forEach((function(e){e.remove()})),e.addPaymentButton("."+t.className),null!=t.querySelector("button")?t.querySelector("button").style.width="100%":null!=t.querySelector("apple-pay-button")&&(t.querySelector("apple-pay-button").style.width="100%")):"nn-apple-pay-button"==t.className&&void 0!==document.querySelectorAll(".nn-apple-pay-error-message")&&null!==document.querySelectorAll(".nn-apple-pay-error-message")&&null!=document.querySelector("input[name=paymentMethodId]:checked")&&null!=document.querySelector("input[name=paymentMethodId]:checked").closest(".payment-method")&&(document.querySelector("input[name=paymentMethodId]:checked").closest(".payment-method").style.display="none"))}))}_displayErrorMsgSubs(e){const t=document.getElementsByClassName("alert alert-danger alert-has-icon");for(;t.length>0;)t[0].parentNode.removeChild(t[0]);var n=document.getElementById("novalnetchangePaymentForm");let a=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),d=document.createElement("span");a.className="alert alert-danger alert-has-icon",o.className="alert-content-container",l.className="alert-content",d.className="icon icon-blocked",d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path d="M12 24C5.3726 24 0 18.6274 0 12S5.3726 0 12 0s12 5.3726 12 12-5.3726 12-12 12zm0-2c5.5228 0 10-4.4772 10-10S17.5228 2 12 2 2 6.4772 2 12s4.4772 10 10 10zm4.2929-15.7071c.3905-.3905 1.0237-.3905 1.4142 0 .3905.3905.3905 1.0237 0 1.4142l-10 10c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3905-.3905-1.0237 0-1.4142l10-10z" id="icons-default-blocked"></path></defs><use xlink:href="#icons-default-blocked" fill="#758CA3" fill-rule="evenodd"></use></svg>',a.appendChild(d),a.appendChild(o),o.appendChild(l),l.innerHTML=e,n.parentNode.insertBefore(a,n),a.scrollIntoView()}}const c=window.PluginManager;c.register("NovalnetPayment",d,"#novalnet-payment-script"),c.register("NovalnetWalletPayment",u,"[data-wallet-payments]")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=196,e(e.s=t);var t}));e.O()}]);